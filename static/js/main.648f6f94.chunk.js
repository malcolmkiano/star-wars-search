(this["webpackJsonpstar-wars-search"]=this["webpackJsonpstar-wars-search"]||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/swlogo.c41f740a.svg"},,,function(e,t,a){e.exports=a(28)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),s=a.n(c),l=a(1),o=a(2),i=a(4),u=a(3),p=a(5),h=a(11),m=a.n(h),f=(a(19),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:m.a,alt:"Star Wars"}),r.a.createElement("h1",null,"SEARCH")),r.a.createElement("p",null,"Find people, planets, films, and more from the Star Wars Universe."))}}]),t}(r.a.Component)),d=(a(20),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=e.target,n=t.endpoint.value,r=t.query.value;a.props.onSearch(n,r)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"searchform"},r.a.createElement("input",{required:!0,maxLength:"50",type:"text",name:"query",spellCheck:"false",autoComplete:"off",placeholder:"Search criteria"}),r.a.createElement("select",{name:"endpoint",defaultValue:"people"},r.a.createElement("option",{value:"people"},"People"),r.a.createElement("option",{value:"planets"},"Planets"),r.a.createElement("option",{value:"films"},"Films"),r.a.createElement("option",{value:"species"},"Species"),r.a.createElement("option",{value:"vehicles"},"Vehicles"),r.a.createElement("option",{value:"starships"},"Starships")),r.a.createElement("span",null,"\u25bc"),r.a.createElement("button",{disabled:this.props.disabled},"Search"))}}]),t}(r.a.Component)),b=(a(21),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.show?"fadeIn":"fadeOut";return r.a.createElement("div",{className:"loader animated ".concat(e)},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))}}]),t}(r.a.Component)),v=a(6),g=a(7),E=a(8),j=a.n(E),O=a(12);function y(e){return w.apply(this,arguments)}function w(){return(w=Object(O.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return(n=e.sent).ok||(a=n.status),e.next=6,n.json();case 6:if(r=e.sent,!a){e.next=9;break}return e.abrupt("return",Promise.reject(a));case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k={getData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n="https://swapi.co/api/".concat(e,"?search=").concat(t,"&page=").concat(a);return y(n)},get:y},C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state=Object(v.a)({},e.data),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.stats;Object.keys(t).forEach((function(a){if("string"===typeof t[a]&&t[a].startsWith("http"))k.get(t[a]).then((function(t){e.setState({stats:Object(v.a)({},e.state.stats,Object(g.a)({},a,t.name||t.title))})}));else if(Array.isArray(t[a])){var n=t[a].slice(0,3),r=t[a].length>3?" + ".concat(t[a].length-3," more"):"";Promise.all(n.map((function(e){return k.get(e).then((function(e){return e.name||e.title}))}))).then((function(t){e.setState({stats:Object(v.a)({},e.state.stats,Object(g.a)({},a,t.join(", ")+r))})}))}}))}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.stats;return r.a.createElement("li",{className:"animated fadeInUp",crawl:this.props.hasCrawl,style:this.props.style},r.a.createElement("h2",null,r.a.createElement("button",{onClick:this.props.onClick},t)),r.a.createElement("div",{className:"stats"},Object.keys(a).map((function(e){var t=a[e];return("object"===typeof t&&t[0].startsWith("http")||"string"===typeof t&&t.startsWith("http"))&&(t="..."),r.a.createElement("span",{key:e,className:"stat"},e.split("_").join(" "),": ",r.a.createElement("b",null,t))}))))}}]),t}(r.a.Component),S=(a(23),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"getStats",value:function(e){var t=Object(v.a)({},e);return Object.keys(t).forEach((function(e){("name"===e||"title"===e||"created"===e||"edited"===e||"opening_crawl"===e||"url"===e||"object"===typeof t[e]&&0===t[e].length)&&delete t[e]})),t}},{key:"generateResultsList",value:function(){var e=this,t=0,a=this.props.rel,n=a.data,c=a.searched,s=a.error,l=n.map((function(a){var n=e.getStats(a),c={animationDelay:"".concat(.2*t,"s")};t++;var s={title:a.title,content:a.opening_crawl},l=s.content?"yes":void 0,o={name:a.name||a.title,stats:n};return r.a.createElement(C,{key:o.name,onClick:function(){return s.content?e.props.onShowCrawl(s):""},hasCrawl:l,style:c,data:o})}));return n.length?l:s?r.a.createElement("p",{className:"error"},s,". Please try again later."):c?r.a.createElement("p",null,"No results found."):""}},{key:"render",value:function(){var e=this,t=this.props.show?"fadeIn":"fadeOut",a=10*(this.props.rel.page-1),n=this.props.rel.count>a+10?"Results ".concat(a+1," - ").concat(a+10," of ").concat(this.props.rel.count):"Results ".concat(a+1," - ").concat(this.props.rel.count," of ").concat(this.props.rel.count);return r.a.createElement("ul",{className:"results animated ".concat(t)},this.props.rel.searched&&this.props.rel.count>0?r.a.createElement("p",null,n):"",this.generateResultsList(),this.props.rel.searched?r.a.createElement("li",{className:"buttons"},r.a.createElement("button",{className:"btn",disabled:!this.props.rel.previous,onClick:function(){return e.props.onNavigate(-1)}},"Previous page"),r.a.createElement("button",{className:"btn",disabled:!this.props.rel.next,onClick:function(){return e.props.onNavigate(1)}},"Next page")):"")}}]),t}(r.a.Component)),N=(a(24),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={animation:"fadeIn"},a.handleClose=function(){a.setState({animation:"fadeOut"}),setTimeout((function(){a.props.onClose()}),500)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.data,t=0,a=e.content?e.content.split("\n").map((function(e){return t++,r.a.createElement("span",{key:e+t},e,r.a.createElement("br",null))})):"";return r.a.createElement("div",{className:"crawl-space animated ".concat(this.state.animation)},r.a.createElement("button",{onClick:this.handleClose},"Close"),r.a.createElement("div",{className:"crawl"},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,a)))}}]),t}(r.a.Component)),x=(a(25),a(13)),D=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement(x.InlineShareButtons,{config:{alignment:"center",enabled:!0,networks:["facebook","twitter","pinterest","email","sms"],radius:50,spacing:8}}),r.a.createElement("p",null,"Designed & developed by ",r.a.createElement("a",{href:"https://malcolmkiano.com",target:"_blank",rel:"noopener noreferrer"},"Malcolm Kiano"),"."))}}]),t}(r.a.Component),q=(a(26),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],count:0,searched:!1,loading:!1,endpoint:null,query:null,page:null,next:null,prev:null,crawl:null,error:null},a.navigateToPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;document.querySelector(".App").scrollTop=0;var t=a.state.page+e;a.setState({page:t,loading:!0},a.getData)},a.handleSearch=function(e,t){a.setState({page:1,loading:!0,endpoint:e,query:t},a.getData)},a.handleCrawl=function(e){e&&a.setState({crawl:e},(function(){return document.querySelector(".crawl-space button").focus()}))},a.handleClose=function(){a.setState({crawl:null})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"getData",value:function(){var e=this,t=this.state,a=t.endpoint,n=t.query,r=t.page;k.getData(a,n,r).then((function(t){e.setState({data:t.results,count:t.count,searched:!0,loading:!1,next:t.next,previous:t.previous})})).catch((function(t){e.setState({loading:!1,error:t.message})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement("main",null,r.a.createElement(d,{onSearch:this.handleSearch,disabled:this.state.loading}),r.a.createElement(b,{show:this.state.loading}),r.a.createElement(S,{rel:this.state,show:!this.state.loading,onShowCrawl:this.handleCrawl,onNavigate:this.navigateToPage}),this.state.crawl&&this.state.crawl.content&&"films"===this.state.endpoint?r.a.createElement(N,{data:this.state.crawl,onClose:this.handleClose}):""),r.a.createElement(D,null))}}]),t}(r.a.Component));a(27);s.a.render(r.a.createElement(q,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.648f6f94.chunk.js.map